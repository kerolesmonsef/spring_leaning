<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<div th:fragment="register" id="myAccount" class="add_to_cart right account-bar">
    <a href="javascript:void(0)" class="overlay" onclick="closeAccount()"></a>
    <div class="cart-inner">
        <div class="cart_top">
            <h3>Login Or Register</h3>
            <div class="close-cart">
                <a href="javascript:void(0)" onclick="closeAccount()">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </a>
            </div>
        </div>
        <form class="theme-form">
            <div class="form-group">
                <label>Email</label>
                <input type="text" class="form-control" placeholder="Email" required="">
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" class="form-control" placeholder="Enter your password" required="">
            </div>
            <div class="form-group">
                <button href="javascript:void(0)" class="btn btn-solid btn-md btn-block ">Login</button>
            </div>
        </form>

        <hr>
        <hr>
        <hr>

        <form class="theme-form" id="registerForm">
            <div class="form-group">
                <label>Name</label>
                <input type="text" minlength="2" maxlength="50" class="form-control" id="register-name"
                       placeholder="Name" required="">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" class="form-control" id="register-email" placeholder="Email" required="">
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" minlength="4" class="form-control" id="register-password"
                       placeholder="Enter your password"
                       required="">
            </div>
            <div class="form-group">
                <button href="javascript:void(0)" class="btn btn-solid btn-md btn-block ">Register</button>
            </div>
        </form>
    </div>

    <script defer>
        window.addEventListener("load", function () {
            $('#registerForm').submit(function () {
                $.ajax({
                    "url": `/register`,
                    "method": "POST",
                    "timeout": 0,
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "data": JSON.stringify({
                        "name": $('#register-name').val(),
                        "email": $('#register-email').val(),
                        "password": $('#register-password').val(),
                    }),
                }).done(function (response) {

                }).fail(function (response) {
                    console.log(response.responseJSON)
                });

                return false;
            })


        }, false)
    </script>
</div>

</html>